er="\nH:LOS\nH:LOS" f=360 q=180
x=xl-:XX y=yl-:YY :0A=(x<0)*((y>0)-0.5)*f+atan(y/x)+q xl=:XX yl=:YY
z=zl-:ZZ h=sqrt(x^2+y^2) :0B=(z<0)*((h>0)-0.5)*f+atan(h/z)+q zl=:ZZ
vec="\nH:"+:0A+"\nP:"+:0B if :SD<4 then vec=er end
if :CL>0 then :Vec=vec goto2 end goto5

MEM
:Vec // easy vector out
:0A // heading (0..360)
:0B // pitch (0..360)