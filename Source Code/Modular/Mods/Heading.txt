er="\nH:LOS\nH:LOS"
x=xl-:XX y=yl-:YY :0A=(x<0)*((y>0)-0.5)*360+atan(y/x)+180
z=zl-:ZZ h=sqrt(x^2+y^2) :0B=(z<0)*((h>0)-0.5)*360+atan(h/z) xl=:XX
vec="\nH:"+:0A+"\nP:"+:0B if :SD<4 then vec=er end yl=:YY zl=:ZZ
if :CL>0 then :Vec=vec goto2 end goto5

MEM
:Vec // easy vector out
:0A // heading (0..360)
:0B // pitch (-180..180)